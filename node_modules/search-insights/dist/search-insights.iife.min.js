var AlgoliaAnalytics=function(n){"use strict";function e(){"function"!=typeof Object.assign&&(Object.assign=function(n,e){var t=arguments;if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),o=1;o<arguments.length;o++){var r=t[o];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i})}function t(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]])}return t}function i(n){return n.reduce(function(n,e){var t=n.events,i=n.additionalParams;return"index"in e?{additionalParams:i,events:t.concat([e])}:{events:t,additionalParams:e}},{events:[],additionalParams:void 0})}var o=function(){try{return Boolean(navigator.cookieEnabled)}catch(n){return!1}},r=function(){try{return Boolean(navigator.sendBeacon)}catch(n){return!1}},s=function(){try{return Boolean(XMLHttpRequest)}catch(n){return!1}},a=function(n){return void 0===n},u=function(n){return"number"==typeof n},c=function(n){return"function"==typeof n};function l(n){return function(e,i){var o,r,s,u,c,l=this;if(!this._userHasOptedOut){if(!(!a(this._apiKey)&&!a(this._appId)||(null===(r=null===(o=i)||void 0===o?void 0:o.headers)||void 0===r?void 0:r["X-Algolia-Application-Id"])&&(null===(u=null===(s=i)||void 0===s?void 0:s.headers)||void 0===u?void 0:u["X-Algolia-API-Key"])))throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters or provide custom credentials in additional parameters.");!this._userToken&&this._anonymousUserToken&&this.setAnonymousUserToken(!0);var h=e.map(function(n){var e,i,o=n.filters,r=t(n,["filters"]),s=Object.assign(Object.assign({},r),{userToken:(i=null===(e=n)||void 0===e?void 0:e.userToken,null!==i&&void 0!==i?i:l._userToken)});return a(o)||(s.filters=o.map(encodeURIComponent)),s});return function(n,e,i,o,r,s,a){void 0===a&&(a={});var u=a["X-Algolia-Application-Id"],c=a["X-Algolia-API-Key"],l=t(a,["X-Algolia-Application-Id","X-Algolia-API-Key"]),h=Object.assign({"X-Algolia-Application-Id":null!==u&&void 0!==u?u:r,"X-Algolia-API-Key":null!==c&&void 0!==c?c:s,"X-Algolia-Agent":encodeURIComponent(e.join("; "))},l),d=Object.keys(h).map(function(n){return n+"="+h[n]}).join("&");return n(i+"/1/events?"+d,{events:o})}(n,this._ua,this._endpointOrigin,h,this._appId,this._apiKey,null===(c=i)||void 0===c?void 0:c.headers)}}}var h="2.7.0",d=["insights-js ("+h+")","insights-js-browser-iife ("+h+")"];var v=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})},f="_ALGOLIA",p=2592e6,g=function(n,e,t){var i=new Date;i.setTime(i.getTime()+t);var o="expires="+i.toUTCString();document.cookie=n+"="+e+";"+o+";path=/"},y=function(n){for(var e=n+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return""};e();var k,b,O,m,_=["de","us"];function T(n){var e,i;if(void 0===n&&(n={}),!a(n.region)&&-1===_.indexOf(n.region))throw new Error("optional region is incorrect, please provide either one of: "+_.join(", ")+".");if(!(a(n.cookieDuration)||u(n.cookieDuration)&&isFinite(n.cookieDuration)&&Math.floor(n.cookieDuration)===n.cookieDuration))throw new Error("optional cookieDuration is incorrect, expected an integer.");!function(n,e,i){var o=e.partial,r=t(e,["partial"]);o||Object.assign(n,i);Object.assign(n,Object.keys(r).reduce(function(n,e){var t;return Object.assign(Object.assign({},n),((t={})["_"+e]=r[e],t))},{}))}(this,n,{_userHasOptedOut:!!n.userHasOptedOut,_region:n.region,_host:n.host,_anonymousUserToken:(e=n.anonymousUserToken,null===e||void 0===e||e),_useCookie:(i=n.useCookie,null!==i&&void 0!==i&&i),_cookieDuration:n.cookieDuration||6*p}),this._endpointOrigin=this._host||(this._region?"https://insights."+this._region+".algolia.io":"https://insights.algolia.io"),this._ua=[].concat(d),n.userToken?this.setUserToken(n.userToken):this._userToken||this._userHasOptedOut||!this._useCookie||this.setAnonymousUserToken()}function x(n,e){return e.map(function(e){return Object.assign({eventType:n},e)})}Object.keys||(Object.keys=(k=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),m=(O=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(n){if("function"!=typeof n&&("object"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var e,t,i=[];for(e in n)k.call(n,e)&&i.push(e);if(b)for(t=0;t<m;t++)k.call(n,O[t])&&i.push(O[t]);return i})),e();var j=function(n){var e=n.requestFn;this._endpointOrigin="https://insights.algolia.io",this._anonymousUserToken=!0,this._userHasOptedOut=!1,this._useCookie=!1,this._cookieDuration=6*p,this._ua=[],this.version=h,this.sendEvents=l(e).bind(this),this.init=T.bind(this),this.addAlgoliaAgent=function(n){-1===this._ua.indexOf(n)&&this._ua.push(n)}.bind(this),this.setUserToken=function(n){return this._userToken=n,c(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken),this._userToken}.bind(this),this.setAnonymousUserToken=function(n){if(void 0===n&&(n=!1),n)this.setUserToken("anonymous-"+v());else if(o()){var e=y(f);if(e&&""!==e&&0===e.indexOf("anonymous-"))this.setUserToken(e);else{var t=this.setUserToken("anonymous-"+v());g(f,t,this._cookieDuration)}}}.bind(this),this.getUserToken=function(n,e){return c(e)&&e(null,this._userToken),this._userToken}.bind(this),this.onUserTokenChange=function(n,e){this._onUserTokenChangeCallback=n,e&&e.immediate&&c(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}.bind(this),this.clickedObjectIDsAfterSearch=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("click",o),r)}.bind(this),this.clickedObjectIDs=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("click",o),r)}.bind(this),this.clickedFilters=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("click",o),r)}.bind(this),this.convertedObjectIDsAfterSearch=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("conversion",o),r)}.bind(this),this.convertedObjectIDs=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("conversion",o),r)}.bind(this),this.convertedFilters=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("conversion",o),r)}.bind(this),this.viewedObjectIDs=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("view",o),r)}.bind(this),this.viewedFilters=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var t=i(n),o=t.events,r=t.additionalParams;return this.sendEvents(x("view",o),r)}.bind(this),this.getVersion=function(n){c(n)&&n(this.version)}.bind(this)},w=function(n,e){var t=JSON.stringify(e),i=navigator.sendBeacon(n,t);return Promise.resolve(!!i||A(n,e))},A=function(n,e){return new Promise(function(t,i){var o=JSON.stringify(e),r=new XMLHttpRequest;r.addEventListener("readystatechange",function(){4===r.readyState&&200===r.status?t(!0):4===r.readyState&&t(!1)}),r.addEventListener("error",function(){return i()}),r.addEventListener("timeout",function(){return t(!1)}),r.open("POST",n),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Content-Length",""+o.length),r.send(o)})};function P(n){var e,t=n.AlgoliaAnalyticsObject;if(t){var i=(e=this,function(n){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];n&&c(e[n])?e[n].apply(e,t):console.warn("The method `"+n+"` doesn't exist.")}),o=n[t];o.queue=o.queue||[];var r=o.queue;r.forEach(function(n){var e=[].slice.call(n),t=e[0],o=e.slice(1);i.apply(void 0,[t].concat(o))}),r.push=function(n){var e=[].slice.call(n),t=e[0],o=e.slice(1);i.apply(void 0,[t].concat(o))}}}function C(n){var e=new j({requestFn:n});return"object"==typeof window&&P.call(e,window),e.version=h,e}var E=C(function(){if(r())return w;if(s())return A;throw new Error("Could not find a supported HTTP request client in this environment.")}());return n.createInsightsClient=C,n.default=E,n}({});
